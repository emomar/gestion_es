{% extends 'layouts/base.html' %}
{% load static %}

{% block title %} AdminLTE 3 | Tableau de bord {% endblock title %}

{% block extrastyle %}

  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Tempusdominus Bootstrap 4 -->
  <link rel="stylesheet" href="{% static 'plugins/tempusdominus-bootstrap-4/css/tempusdominus-bootstrap-4.min.css' %}">
  <!-- iCheck -->
  <link rel="stylesheet" href="{% static 'plugins/icheck-bootstrap/icheck-bootstrap.min.css' %}">
  <!-- JQVMap -->
  <link rel="stylesheet" href="{% static 'plugins/jqvmap/jqvmap.min.css' %}">
  <!-- Daterange picker -->
  <link rel="stylesheet" href="{% static 'plugins/daterangepicker/daterangepicker.css' %}">
  <!-- summernote -->
  <link rel="stylesheet" href="{% static 'plugins/summernote/summernote-bs4.min.css' %}">

{% endblock extrastyle %}

{% block bodyclass %} hold-transition sidebar-mini layout-fixed {% endblock bodyclass %}

{% block content %}
<style>

.card {
    background-color: #fff;
    border-radius: 10px;
    border: none;
    position: relative;
    margin-bottom: 30px;
    transition: transform 0.3s, box-shadow 0.3s;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.card .card-statistic-3 .card-icon-large .fas, 
.card .card-statistic-3 .card-icon-large .far, 
.card .card-statistic-3 .card-icon-large .fab, 
.card .card-statistic-3 .card-icon-large .fal {
    font-size: 110px;
}

.card .card-statistic-3 .card-icon {
    text-align: center;
    line-height: 50px;
    margin-left: 15px;
    color: #000;
    position: absolute;
    right: -5px;
    top: 20px;
    opacity: 0.1;
    transition: opacity 0.3s;
}

.card:hover .card-icon {
    opacity: 0.4;
}

.l-bg-cherry {
    background: linear-gradient(to right, #493240, #f09) !important;
    color: #fff;
}

.l-bg-blue-dark {
    background: linear-gradient(to right, #373b44, #4286f4) !important;
    color: #fff;
}

.l-bg-green-dark {
    background: linear-gradient(to right, #0a504a, #38ef7d) !important;
    color: #fff;
}

.l-bg-orange-dark {
    background: linear-gradient(to right, #a86008, #ffba56) !important;
    color: #fff;
}

.l-bg-cyan {
    background: linear-gradient(135deg, #289cf5, #84c0ec) !important;
    color: #fff;
}

.l-bg-green {
    background: linear-gradient(135deg, #23bdb8 0%, #43e794 100%) !important;
    color: #fff;
}

.l-bg-orange {
    background: linear-gradient(to right, #f9900e, #ffba56) !important;
    color: #fff;
}

</style>
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0">Tableau de bord</h1>
          </div><!-- /.col -->
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Acceuil</a></li>
              <li class="breadcrumb-item active">Tableau de bord </li>
            </ol>
            
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content-header -->

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <!-- Small boxes (Stat box) -->
     <div class="row ">
        <div class="col-xl-3 col-lg-7">
            <div class="card l-bg-cherry">
                <div class="card-statistic-3 p-3">
                    <div class="card-icon card-icon-large"><i class="fas fa-users"></i></div>
                    <div class="mb-5">
                        <h5 class="card-title mb-0">Total Sortie</h5>
                    </div>
                    <div class="row align-items-center mb-2 d-flex">
                        <div class="col-8">
                            <h2 class="d-flex align-items-center mb-0">
                                {{ total_exits }}
                            </h2>
                        </div>
                        <div class="col-4 text-right">
                            
                        </div>
                    </div>
                    <div class="" data-height="8" style="height: 10px;">
                        <div class="progress-bar l-bg-cyan" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-lg-7">
            <div class="card l-bg-blue-dark">
                <div class="card-statistic-3 p-3">
                    <div class="card-icon card-icon-large"><i class="fas fa-users"></i></div>
                    <div class="mb-5">
                        <h5 class="card-title mb-0">Nombre de Sorties par jour</h5>
                    </div>
                    <div class="row align-items-center mb-2 d-flex">
                        <div class="col-8">
                            <h3>{{ exits_per_day }}<sup style="font-size: 20px"></sup></h3>  
                        </div>
                        <div class="col-4 text-right">
                            
                        </div>
                    </div>
                    <div class="" data-height="8" style="height: 10px;">
                        <div class="progress-bar l-bg-green" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-lg-7">
            <div class="card l-bg-green-dark">
                <div class="card-statistic-3 p-3">
                    <div class="card-icon card-icon-large"><i class="fas fa-users"></i></div>
                    <div class="mb-5">
                        <h5 class="card-title mb-0">Total Entrée</h5>
                    </div>
                    <div class="row align-items-center mb-2 d-flex">
                        <div class="col-8">
                            <h2 class="d-flex align-items-center mb-0">
                               {{ total_entries }}
                            </h2>
                        </div>
                        <div class="col-4 text-right">
                            
                        </div>
                    </div>
                    <div class="" data-height="8" style="height: 10px;">
                        <div class="progress-bar l-bg-orange" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-lg-7">
            
            <div class="card l-bg-orange-dark">
                <div class="card-statistic-3 p-3">
                    <div class="card-icon card-icon-large"><i class="fas fa-users"></i></i></div>
                    <div class="mb-5">
                        <h5 class="card-title mb-0">Nombre d'Entrée par jour</h5>
                    </div>
                    <div class="row align-items-center mb-2 d-flex">
                        <div class="col-8">
                            <h2 class="d-flex align-items-center mb-0">
                                {{ entries_per_day }}
                            </h2>
                        </div>
                        <div class="col-4 text-right">
                            
                        </div>
                    </div>
                    <div class="" data-height="8" style="height: 10px;">
                        <div class="progress-bar l-bg-cyan" role="progressbar" data-width="25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="width: 25%;"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <!-- Créer un canvas pour le premier graphique (doughnut chart) -->
                            <canvas id="myChart1"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Div pour le deuxième graphique -->
                <div class="col-md-6">
                    <div class="card">
                        <div class="card-body">
                            <!-- Créer un canvas pour le deuxième graphique (bar chart) -->
                            <canvas id="myChart2"></canvas>
                        </div>
                    </div>
                    </div>
                                <div class="col-md-12 mt-4">
                <div class="card">
                    <div class="card-body">
                        <!-- Créer un canvas pour le troisième graphique (bar chart pour les jours de la semaine) -->
                        <canvas id="myChart3" width="800" height="400"></canvas>
                    </div>
                </div>
            </div>
        </div>

    </div>
     
 
       <!-- ./col -->
</div>
          <!-- ./col -->
      </div>    
        
    </section>
    <!-- /.content -->
  </div>
  
  {% endblock content %}

  {% block extra_scripts %}
  
    <!-- jQuery UI 1.11.4 -->
    <script src="{% static 'plugins/jquery-ui/jquery-ui.min.js' %}"></script>
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
      $.widget.bridge('uibutton', $.ui.button)
    </script>

    <!-- ChartJS -->
    <script src="{% static 'plugins/chart.js/Chart.min.js' %}"></script>
    <!-- Sparkline -->
    <script src="{% static 'plugins/sparklines/sparkline.js' %}"></script>
    <!-- JQVMap -->
    <script src="{% static 'plugins/jqvmap/jquery.vmap.min.js' %}"></script>
    <script src="{% static 'plugins/jqvmap/maps/jquery.vmap.usa.js' %}"></script>
    <!-- jQuery Knob Chart -->
    <script src="{% static 'plugins/jquery-knob/jquery.knob.min.js' %}"></script>
    <!-- daterangepicker -->
    <script src="{% static 'plugins/moment/moment.min.js' %}"></script>
    <script src="{% static 'plugins/daterangepicker/daterangepicker.js' %}"></script>
    <!-- Tempusdominus Bootstrap 4 -->
    <script src="{% static 'plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js' %}"></script>
    <!-- Summernote -->
    <script src="{% static 'plugins/summernote/summernote-bs4.min.js' %}"></script>
    <!-- overlayScrollbars -->
    <script src="{% static 'plugins/overlayScrollbars/js/jquery.overlayScrollbars.min.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
    <script src="{% static 'plugins/chart.js/Chart.min.js' %}"></script>
<script src="{% static 'plugins/jquery-ui/jquery-ui.min.js' %}"></script>
<!-- Chart.js -->
<script src="{% static 'plugins/chart.js/Chart.min.js' %}"></script>

<script src="{% static 'plugins/jquery-ui/jquery-ui.min.js' %}"></script>
<!-- Chart.js -->
<script src="{% static 'plugins/chart.js/Chart.min.js' %}"></script>

<script>
  // Premier graphique (doughnut chart) pour les entrées et les sorties
 // Premier graphique (doughnut chart) pour les entrées et les sorties
const ctx1 = document.getElementById('myChart1').getContext('2d');
new Chart(ctx1, {
    type: 'doughnut',
    data: {
        labels: ['Entrées', 'Sorties'],
        datasets: [{
            label: 'Nombre d\'entrées et de sorties',
            data: [{{ total_entries }}, {{ total_exits }}],
            backgroundColor: [
                'rgba(54, 162, 235, 0.2)', // Couleur de fond pour les entrées
                'rgba(255, 99, 132, 0.2)'   // Couleur de fond pour les sorties
            ],
            borderColor: [
                'rgba(54, 162, 235, 1)', // Couleur de la bordure pour les entrées
                'rgba(255, 99, 132, 1)'   // Couleur de la bordure pour les sorties
            ],
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true,
                max: 500
            }
        }
    }
});

// Deuxième graphique (bar chart) pour les entrées par mois
const ctx2 = document.getElementById('myChart2').getContext('2d');
new Chart(ctx2, {
    type: 'bar',
    data: {
        labels: {{ months|safe }},
        datasets: [
            {
                label: 'Nombre d\'entrées',
                data: {{ entries_per_month|safe }},
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            },
            {
                label: 'Nombre de sorties',
                data: {{ exits_per_month|safe }},
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgba(255, 99, 132, 1)',
                borderWidth: 1
            }
        ]
    },
    options: {
        responsive: true,
        plugins: {
            legend: {
                position: 'top'
            },
            title: {
                display: true,
                text: 'Nombre d\'entrées et de sorties par mois'
            }
        },
        scales: {
            y: {
                beginAtZero: false, // Commencer à partir de la valeur minimale
                min: 25, // Valeur minimale de l'axe y
                max: 500 // Valeur maximale de l'axe y
            }
        }
    }
});

// Troisième graphique (bar chart) pour les entrées et sorties par jour de la semaine
const ctx3 = document.getElementById('myChart3').getContext('2d');
new Chart(ctx3, {  
    type: 'bar',
    data: {
        labels: ['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'],
        datasets: [{
            label: 'Nombre d\'entrées',
            backgroundColor: 'rgba(54, 162, 235, 0.2)',
            borderColor: 'rgba(54, 162, 235, 1)',
            borderWidth: 1,
            data: [{{ entries_per_days.Monday }}, {{ entries_per_days.Tuesday }}, {{ entries_per_days.Wednesday }},
                   {{ entries_per_days.Thursday }}, {{ entries_per_days.Friday }}, {{ entries_per_days.Saturday }},
                   {{ entries_per_days.Sunday }}]
        }, {
            label: 'Nombre de sorties',
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgba(255, 99, 132, 1)',
            borderWidth: 1,
            data: [{{ exits_per_days.Monday }}, {{ exits_per_days.Tuesday }}, {{ exits_per_days.Wednesday }},
                   {{ exits_per_days.Thursday }}, {{ exits_per_days.Friday }}, {{ exits_per_days.Saturday }},
                   {{ exits_per_days.Sunday }}]
        }]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});




</script>
{% endblock extra_scripts %}

    
  
  

